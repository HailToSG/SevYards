<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration xmlns="https://cm5.intertrust.ru/config" xmlns:act="https://cm5.intertrust.ru/config/action">

    <!-- Форма для доменного объекта "Территория" -->
    <form name="territories_form" domain-object-type="ter_territory" is-default="false">
        <act:tool-bar useDefault="false">
            <act:action componentName="toggle.edit.on.action" text="Назначить" tooltip="Назначить"
                        rendered="toggle-edit and preview" imageClass="actionBar-edit" order="20"
                        visibility-checker="territory.id.keeper"/>
            <act:action componentName="save.action" rendered="toggle-edit and not preview" text="Сохранить"
                        tooltip="Сохранить изменения" order="10" imageClass="actionBar-save"/>
            <act:action componentName="close.in.central.panel.action" text="Закрыть" tooltip="Закрыть"
                        rendered="toggle-edit and not preview"
                        imageClass="actionBar-close"/>
        </act:tool-bar>
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab>
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNameLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNameValue"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryPersonLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryPersonValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>
                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNameLabel">
                <text>Имя территории</text>
            </label>
            <text-box id="territoryNameValue" read-only="true">
                <field-path value="name"/>
            </text-box>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue" read-only="true">
                <field-path value="number"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <text-box id="territoryTypeValue" read-only="true">
                <field-path value="territory_type"/>
            </text-box>

            <label id="territoryPersonLabel">
                <text>Назначить исполнителя</text>
            </label>
            <linked-domain-objects-table id="territoryPersonValue" modal-width="500px" modal-height="400px" max-tooltip-width="300px">
                <field-path value="person_territory^ter_territory"/>
                <linked-form name="person_territory_form" inline="true"/>
                <summary-table>
                    <summary-table-column header="Назначенные исполнители" widget-id="personTerritoryValue">
                        <pattern value="{Person.lastname} {Person.firstname}"/>
                    </summary-table-column>
                </summary-table>
                <selection-sort-criteria>
                    <sort-criterion field="Person.lastname" order="ASC"/>
                </selection-sort-criteria>
                <single-choice value="false"/>
            </linked-domain-objects-table>

        </widget-config>

    </form>

    <form name="territories_public_form" domain-object-type="ter_territory" is-default="false">
        <act:tool-bar useDefault="false">
            <act:action componentName="save.action" rendered="toggle-edit and not preview" text="Сохранить"
                        tooltip="Сохранить изменения" order="10" imageClass="actionBar-save"/>
            <act:action componentName="toggle.edit.on.action" text="Редактировать" tooltip="Редактировать"
                        rendered="toggle-edit and preview" imageClass="actionBar-edit" order="20"
                        visibility-checker="territory.id.keeper"/>
            <act:action componentName="close.in.central.panel.action" text="Закрыть" tooltip="Закрыть"
                        rendered="toggle-edit and not preview" order="5"
                        imageClass="actionBar-close"/>
            <act:action componentName="delete.action" text="Удалить" tooltip="Удалить территорию"
                        rendered="not toggle-edit or (toggle-edit and preview)"
                        imageClass="actionBar-delete"/>


        </act:tool-bar>
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">
                <tab name="Общественная территория">
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNameLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNameValue"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td h-align="right">
                                        <widget id="publicLinkedLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="publicLinkedValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>

                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>
            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNameLabel">
                <text>Имя территории</text>
            </label>
            <text-box id="territoryNameValue">
                <field-path value="name"/>
            </text-box>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="number"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <text-box id="territoryTypeValue" read-only="true">
                <field-path value="territory_type">
                    <default-value>
                        <field value="Общественная территория"/>
                    </default-value>
                </field-path>
            </text-box>

            <label id="publicLinkedLabel">
                <text>Общественная территория</text>
            </label>

            <linked-domain-objects-table id="publicLinkedValue" delete-linked-objects="true" modal-width="600px"
                                         modal-height="400px">
                <field-path value="ter_public^territory_id" on-root-delete="unlink"/>

                <linked-form name="ter_public_form" inline="true"
                             domain-object-type="ter_public"/>
                <summary-table>
                    <summary-table-column header="Вид" widget-id="kindOfTerritoryValue">
                        <pattern value="{kind_of_territory}"/>
                    </summary-table-column>
                    <summary-table-column header="Общая площадь" widget-id="summaryAreaValue">
                        <pattern value="{summary_area}"/>
                    </summary-table-column>
                    <summary-table-column header="Площадь объектов" widget-id="objectsAreaLabel">
                        <pattern value="{objects_area}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="true"/>
            </linked-domain-objects-table>


        </widget-config>

    </form>

    <form name="territories_yard_form" domain-object-type="ter_territory" is-default="false">
        <act:tool-bar useDefault="false">
            <act:action componentName="save.action" rendered="toggle-edit and not preview" text="Сохранить"
                        tooltip="Сохранить изменения" order="10" imageClass="actionBar-save"/>
            <act:action componentName="toggle.edit.on.action" text="Редактировать" tooltip="Редактировать"
                        rendered="toggle-edit and preview" imageClass="actionBar-edit" order="20"
                        visible-when-new="false"/>
            <act:action componentName="close.in.central.panel.action" text="Закрыть" tooltip="Закрыть"
                        rendered="toggle-edit and not preview" order="5"
                        imageClass="actionBar-close"/>
            <act:action componentName="delete.action" text="Удалить" tooltip="Удалить территорию"
                        rendered="not toggle-edit or (toggle-edit and preview)"
                        imageClass="actionBar-delete"/>

        </act:tool-bar>
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab name="Территория">
                    <single-entry-group>
                        <tab-group>
                            <table>
                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNameLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNameValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="yardLinkedLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="yardLinkedValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>

                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNameLabel">
                <text>Имя территории</text>
            </label>
            <text-box id="territoryNameValue">
                <field-path value="name"/>
            </text-box>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="number"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <text-box id="territoryTypeValue" read-only="true">
                <field-path value="territory_type">
                    <default-value>
                        <field value="Дворовая территория"/>
                    </default-value>
                </field-path>
            </text-box>

            <label id="yardLinkedLabel">
                <text>Дворовая территория</text>
            </label>

            <linked-domain-objects-table id="yardLinkedValue" delete-linked-objects="true" modal-width="600px"
                                         modal-height="400px">
                <field-path value="ter_yard^territory_id" on-root-delete="unlink"/>

                <linked-form name="ter_yard_form" inline="true"
                             domain-object-type="ter_yard"/>
                <summary-table>
                    <summary-table-column header="Общая площадь" widget-id="sumAreaValue">
                        <pattern value="{summary_area}"/>
                    </summary-table-column>
                    <summary-table-column header="Площадь объектов" widget-id="objAreaValue">
                        <pattern value="{objects_area}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="true"/>
            </linked-domain-objects-table>
        </widget-config>
    </form>

    <form name="territories_private_form" domain-object-type="ter_territory" is-default="false">
        <act:tool-bar useDefault="false">
            <act:action componentName="save.action" rendered="toggle-edit and not preview" text="Сохранить"
                        tooltip="Сохранить изменения" order="10" imageClass="actionBar-save"/>
            <act:action componentName="toggle.edit.on.action" text="Редактировать" tooltip="Редактировать"
                        rendered="toggle-edit and preview" imageClass="actionBar-edit" order="20"
                        visible-when-new="false"/>
            <act:action componentName="close.in.central.panel.action" text="Закрыть" tooltip="Закрыть"
                        rendered="toggle-edit and not preview" order="5"
                        imageClass="actionBar-close"/>
            <act:action componentName="delete.action" text="Удалить" tooltip="Удалить территорию"
                        rendered="not toggle-edit or (toggle-edit and preview)"
                        imageClass="actionBar-delete"/>

        </act:tool-bar>
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab name="Территория">
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNameLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNameValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="privateLinkedLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="privateLinkedValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>

                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNameLabel">
                <text>Имя территории</text>
            </label>
            <text-box id="territoryNameValue">
                <field-path value="name"/>
            </text-box>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="number"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <text-box id="territoryTypeValue" read-only="true">
                <field-path value="territory_type">
                    <default-value>
                        <field value="Объект ИЖС"/>
                    </default-value>
                </field-path>
            </text-box>

            <label id="privateLinkedLabel">
                <text>ИЖС - объект</text>
            </label>

            <linked-domain-objects-table id="privateLinkedValue" delete-linked-objects="true" modal-width="600px"
                                         modal-height="400px">
                <field-path value="ter_private_housing^territory_id" on-root-delete="unlink"/>

                <linked-form name="ter_private_form" inline="true"
                             domain-object-type="ter_private_housing"/>
                <summary-table>
                    <summary-table-column header="Состояние фасада" widget-id="stateFacadeValue">
                        <pattern value="{facade_state}"/>
                    </summary-table-column>
                    <summary-table-column header="Состояние придомовой территории" widget-id="territoryStateValue">
                        <pattern value="{territory_state}"/>
                    </summary-table-column>
                    <summary-table-column header="Информация по подписании соглашения о благоустройстве"
                                          widget-id="contractInfoValue">
                        <pattern value="{contract_of_improvement}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="true"/>
            </linked-domain-objects-table>
        </widget-config>

    </form>

    <form name="territories_ulip_form" domain-object-type="ter_territory" is-default="false">
        <act:tool-bar useDefault="false">
            <act:action componentName="save.action" rendered="toggle-edit and not preview" text="Сохранить"
                        tooltip="Сохранить изменения" order="10" imageClass="actionBar-save"/>
            <act:action componentName="toggle.edit.on.action" text="Редактировать" tooltip="Редактировать"
                        rendered="toggle-edit and preview" imageClass="actionBar-edit" order="20"
                        visible-when-new="false"/>
            <act:action componentName="close.in.central.panel.action" text="Закрыть" tooltip="Закрыть"
                        rendered="toggle-edit and not preview" order="5"
                        imageClass="actionBar-close"/>
            <act:action componentName="delete.action" text="Удалить" tooltip="Удалить территорию"
                        rendered="not toggle-edit or (toggle-edit and preview)"
                        imageClass="actionBar-delete"/>

        </act:tool-bar>
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab name="Территория">
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNameLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNameValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="ulipLinkedLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="ulipLinkedValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>

                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNameLabel">
                <text>Имя территории</text>
            </label>
            <text-box id="territoryNameValue">
                <field-path value="name"/>
            </text-box>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="number"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <text-box id="territoryTypeValue" read-only="true">
                <field-path value="territory_type">
                    <default-value>
                        <field value="Объект ЮЛ и ИП"/>
                    </default-value>
                </field-path>
            </text-box>

            <label id="ulipLinkedLabel">
                <text>Объект ЮЛ и ИП</text>
            </label>

            <linked-domain-objects-table id="ulipLinkedValue" delete-linked-objects="true" modal-width="600px"
                                         modal-height="400px">
                <field-path value="ter_ulip^territory_id" on-root-delete="unlink"/>

                <linked-form name="ter_ulip_form" inline="true"
                             domain-object-type="ter_ulip"/>
                <summary-table>
                    <summary-table-column header="Состояние фасада" widget-id="stateFacadeValue">
                        <pattern value="{facade_state}"/>
                    </summary-table-column>
                    <summary-table-column header="Состояние прилегающей территории" widget-id="territoryStateValue">
                        <pattern value="{territory_state}"/>
                    </summary-table-column>
                    <summary-table-column header="Информация по подписании соглашения о благоустройстве"
                                          widget-id="contractInfoValue">
                        <pattern value="{contract_of_improvement}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="true"/>
            </linked-domain-objects-table>

        </widget-config>

    </form>
</configuration>