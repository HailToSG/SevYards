<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration xmlns="https://cm5.intertrust.ru/config" xmlns:act="https://cm5.intertrust.ru/config/action">

    <!-- Форма для доменного объекта "Жилое строение" -->
    <form name="territories_form" domain-object-type="ter_territory" is-default="true">
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab>
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>
                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="name"/>
            </text-box>


        </widget-config>

    </form>

    <form name="territories_yard_form" domain-object-type="ter_territory" is-default="false">
        <markup>
            <header>
                <table>
                    <tr>
                        <td h-align="left">
                            <widget id="headerLabel"/>
                        </td>
                    </tr>
                </table>
            </header>

            <body display-single-tab="true">

                <tab name="Территория">
                    <single-entry-group>
                        <tab-group>
                            <table>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryNumberLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryNumberValue"/>
                                    </td>
                                </tr>

                                <tr>
                                    <td h-align="right">
                                        <widget id="territoryTypeLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="territoryTypeValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>


                    </single-entry-group>
                </tab>

                <tab name="Тип территории">
                    <single-entry-group>
                        <tab-group>
                            <table >

                                <tr>
                                    <td h-align="right">
                                        <widget id="yardLinkedLabel"/>
                                    </td>

                                    <td h-align="left">
                                        <widget id="yardLinkedValue"/>
                                    </td>
                                </tr>

                            </table>
                        </tab-group>

                    </single-entry-group>
                </tab>

            </body>

        </markup>
        <widget-config>

            <label id="headerLabel">
                <text>Территория</text>
            </label>

            <label id="territoryNumberLabel">
                <text>Номер территории</text>
            </label>
            <text-box id="territoryNumberValue">
                <field-path value="name"/>
            </text-box>

            <label id="territoryTypeLabel">
                <text>Тип территории</text>
            </label>

            <enumeration-box id="territoryTypeValue" read-only="true">
                <field-path value="name"/>
                <mapping>
                    <map value="yard_area" display-text="Дворовая территория"/>
                </mapping>
            </enumeration-box>

            <label id="yardLinkedLabel">
                <text>Дворовая территория</text>
            </label>

            <linked-domain-objects-table id="yardLinkedValue" delete-linked-objects="true" modal-width="600px" modal-height="400px">
                <field-path value="ter_yard^territory_id" on-root-delete="unlink"/>

                <linked-form name="ter_yard_form" inline="true"
                             domain-object-type="ter_yard"/>
                <summary-table>
                    <summary-table-column header="Общая площадь" widget-id="sumAreaValue">
                        <pattern value="{summary_area}"/>
                    </summary-table-column>
                    <summary-table-column header="Площадь объектов" widget-id="objAreaValue">
                        <pattern value="{objects_area}"/>
                    </summary-table-column>
                </summary-table>
                <single-choice value="true"/>
            </linked-domain-objects-table>


        </widget-config>

    </form>
</configuration>